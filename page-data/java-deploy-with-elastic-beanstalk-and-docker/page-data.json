{"componentChunkName":"component---src-templates-blog-template-js","path":"/java-deploy-with-elastic-beanstalk-and-docker/","result":{"data":{"cur":{"id":"8de7e380-0b40-51f3-8821-8375fa969e0b","html":"<h2 id=\"-적용-이유\" style=\"position:relative;\"><a href=\"#-%EC%A0%81%EC%9A%A9-%EC%9D%B4%EC%9C%A0\" aria-label=\" 적용 이유 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🤔 적용 이유</h2>\n<h3 id=\"autoscaling-loadbalancer\" style=\"position:relative;\"><a href=\"#autoscaling-loadbalancer\" aria-label=\"autoscaling loadbalancer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AutoScaling, LoadBalancer</h3>\n<p>EB를 사용해본 적은 없으나 사용율이 증가하면 scale out 했다가, 다시 줄어들면 scale in 을 할 수 있는 <strong>AutoScaling Group</strong>과 서버의 부하를 나누어 주는 <strong>LoadBalancer</strong>를 간편하게 설정할 수 있는 점이 장점으로 느껴졌습니다.\n다른 여러 장점은 사용해보기 전에는 와닿지 않아서 ‘사용해보고 느껴보자’ 해서 사용했습니다.</p>\n<h2 id=\"️-설정-방법\" style=\"position:relative;\"><a href=\"#%EF%B8%8F-%EC%84%A4%EC%A0%95-%EB%B0%A9%EB%B2%95\" aria-label=\"️ 설정 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>⚙️ 설정 방법</h2>\n<h3 id=\"1-iam-역할-추가\" style=\"position:relative;\"><a href=\"#1-iam-%EC%97%AD%ED%95%A0-%EC%B6%94%EA%B0%80\" aria-label=\"1 iam 역할 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. IAM 역할 추가</h3>\n<p>Elastic beanstalk(이하 EB) 의 환경을 구성하기 위해 각 역할에 권한이 필요합니다.</p>\n<h4 id=\"11-서비스-역할\" style=\"position:relative;\"><a href=\"#11-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%97%AD%ED%95%A0\" aria-label=\"11 서비스 역할 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.1 서비스 역할</h4>\n<p>EB를 서비스로 사용하므로 담당할 IAM 역할을 부여합니다.\n<a href=\"https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/iam-servicerole.html\">Elastic Beanstalk 서비스 역할 관리</a></p>\n<p><img src=\"https://velog.velcdn.com/images/kws60000/post/c925b17e-a881-431f-80db-601c7e23e505/image.png\" alt=\"\"></p>\n<p>설정하지 않을 시, 다음과 같은 에러를 만나게 됩니다..</p>\n<blockquote>\n<p>Configuration validation exception: Invalid option specification (Namespace: ‘aws:elasticbeanstalk:managedactions’, OptionName: ‘ManagedActionsEnabled’): You can’t enable managed platform updates when your environment uses the service-linked role ‘AWSServiceRoleForElasticBeanstalk’. Select a service role that has the ‘AWSElasticBeanstalkManagedUpdatesCustomerRolePolicy’ managed policy.</p>\n</blockquote>\n<br />\n<h4 id=\"12-ec2-인스턴스-프로파일\" style=\"position:relative;\"><a href=\"#12-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%ED%94%84%EB%A1%9C%ED%8C%8C%EC%9D%BC\" aria-label=\"12 ec2 인스턴스 프로파일 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1.2 EC2 인스턴스 프로파일</h4>\n<p>EB 환경 구성이 완료되면 EC2 인스턴스가 자동으로 생성됩니다. 이를 위해 IAM 역할이 필요합니다.\n<a href=\"https://docs.aws.amazon.com/ko_kr/elasticbeanstalk/latest/dg/iam-instanceprofile.html#iam-instanceprofile-create\">Elastic Beanstalk 인스턴스 프로파일 관리</a></p>\n<p><img src=\"https://velog.velcdn.com/images/kws60000/post/7dc30e7e-5db3-4df3-a575-0e36ec547a5a/image.png\" alt=\"\"></p>\n<br />\n<h3 id=\"2-환경-구성\" style=\"position:relative;\"><a href=\"#2-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1\" aria-label=\"2 환경 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 환경 구성</h3>\n<p><a href=\"https://ap-northeast-2.console.aws.amazon.com/elasticbeanstalk/home?region=ap-northeast-2#/create-environment\">Elastic Beanstalk 환경 구성</a></p>\n<p><img src=\"https://velog.velcdn.com/images/kws60000/post/df13710c-fdc3-4f10-8406-161353d4d4d4/image.png\" alt=\"\"></p>\n<p>환경 티어: 웹 서버 환경 선택 시 Http 요청을 처리 합니다.<br />\n환경 정보 - 환경 이름: 애플리케이션 이름 + [-env] 형식으로 자동 완성됩니다.<br />\n환경 정보 - 도메인: 작성하지 않을 시 랜덤값으로 자동 생성됩니다.<br /></p>\n<p><img src=\"https://velog.velcdn.com/images/kws60000/post/2c5a7da3-e0e0-45c9-980a-bd21e970a317/image.png\" alt=\"\"></p>\n<p>사전 설정: AutoScaling, LoadBalancer를 사용할 예정이라면 고가용성을 선택해 줍니다. 아니면 단일 인스턴스를 선택합니다.</p>\n<p>여기까지 설정하고 검토 단계로 건너뛰면 잠시 뒤 EB 가 생성됩니다.\n생성된 도메인을 클릭하면 화면이 아래처럼 출력됩니다.</p>\n<p><img src=\"https://velog.velcdn.com/images/kws60000/post/9244fab9-b269-461b-ad4e-0d9b1b989928/image.png\" alt=\"\"></p>\n<br />\n<h3 id=\"3-배포\" style=\"position:relative;\"><a href=\"#3-%EB%B0%B0%ED%8F%AC\" aria-label=\"3 배포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 배포</h3>\n<p>도커 허브 레포지토리를 생성하고, 이미지를 추가해줍니다.\ndocker-compose.yml 을 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">version: <span class=\"token string\">\"3\"</span>\n  api:\n    image: tester/jpa-rest:0.0.1-dev\n    restart: always\n    ports:\n      - <span class=\"token string\">\"80:9090\"</span>\n    container_name: jpa-rest-api\n    environment:\n      TZ: Asia/Seoul\n      SPRING_PROFILES_ACTIVE: prod</code></pre></div>\n<br />\n<p>EB 환경 탭에서 업로드 및 배포를 클릭합니다.</p>\n<p><img src=\"https://velog.velcdn.com/images/kws60000/post/48fc5a1d-1bff-41b0-b61d-fc5570e97215/image.png\" alt=\"\"></p>\n<p>정상 배포가 된걸 확인할 수 있습니다.</p>\n<p><img src=\"https://velog.velcdn.com/images/kws60000/post/e8d180c9-1b96-43c7-9e7c-4736a4fbdf2f/image.png\" alt=\"\"></p>\n<br />\n<h3 id=\"4-배포-옵션\" style=\"position:relative;\"><a href=\"#4-%EB%B0%B0%ED%8F%AC-%EC%98%B5%EC%85%98\" aria-label=\"4 배포 옵션 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 배포 옵션</h3>\n<p>배포 옵션은 4가지 정도가 존재합니다. Rolling 이 기본값으로 설정되어 있습니다. 저는 기본 설정인 Rolling 방식으로 진행하여 무중단 배포가 가능하도록 설정했습니다. 다운타임이 존재하지 않으면서도 배포시간이 비교적 빨라서 소규모 서비스에서 적합하다고 생각했습니다.</p>\n<h4 id=\"1-all-at-once\" style=\"position:relative;\"><a href=\"#1-all-at-once\" aria-label=\"1 all at once permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. All at once</h4>\n<p>모든 인스턴스에 동시에 새 버전 배포\n단순하고 가장 빠른 배포 방식</p>\n<p>단점: 서비스가 중단되는 다운타임이 존재한다.</p>\n<h4 id=\"2-rolling\" style=\"position:relative;\"><a href=\"#2-rolling\" aria-label=\"2 rolling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Rolling</h4>\n<p>배치 단위로 새 버전 배포 (단일 인스턴스 불가)\n예를 들어, 4개의 인스턴스가 존재한다고 가정합니다.\n2개의 인스턴스를 먼저 배포하고, 배포가 완료되면 나머지 인스턴스도 배포합니다.</p>\n<p>단점: 순차적으로 배포가 되기 때문에, 누군가는 업데이트 전 버전을 누구는 업데이트 후 버전을 볼 수 있습니다.</p>\n<h4 id=\"3-rolling-with-additional-batch\" style=\"position:relative;\"><a href=\"#3-rolling-with-additional-batch\" aria-label=\"3 rolling with additional batch permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Rolling with additional batch</h4>\n<p>배치 단위로 새 버전 배포, +1 추가 배치 (단일 인스턴스 불가)\n예를 들어, 4개의 인스턴스가 존재한다고 가정합니다. 배포 시 2개의 인스턴스를 추가합니다. 이후 배치 단위로 배포합니다. 6개중 4개의 인스턴스가 배포 완료되면 2개의 인스턴스는 종료 합니다.</p>\n<h4 id=\"4-immutable\" style=\"position:relative;\"><a href=\"#4-immutable\" aria-label=\"4 immutable permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Immutable</h4>\n<p>새로운 인스턴스 그룹에 배포\nAutoScaling Group을 새로 만들어 배포한다. 새로 생긴 그룹은 기존의 그룹과 같은 DNS 를 바라본다. (Blue green 과 비슷하다)</p>\n<br />\n<h3 id=\"5-autoscaling\" style=\"position:relative;\"><a href=\"#5-autoscaling\" aria-label=\"5 autoscaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. AutoScaling</h3>\n<p>EB 의 AutoScaling 방법은 두 가지로 나뉩니다.</p>\n<h4 id=\"1-triggers-based-scaling\" style=\"position:relative;\"><a href=\"#1-triggers-based-scaling\" aria-label=\"1 triggers based scaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Triggers based scaling</h4>\n<p>특정 메트릭의 임계값을 기준으로 스케일링을 한다.</p>\n<h4 id=\"2-time-based-scaling\" style=\"position:relative;\"><a href=\"#2-time-based-scaling\" aria-label=\"2 time based scaling permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Time-based scaling</h4>\n<p>특정 시간을 기준으로 스케일링을 한다. (ex. 오전 8시에 대규모 업데이트가 실시 된다.)</p>\n<h4 id=\"설정하기\" style=\"position:relative;\"><a href=\"#%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>설정하기</h4>\n<p>저는 CPU 사용률을 메트릭으로 하여 60% 이상일 시 스케일업을 하도록 설정했습니다.</p>\n<p><img src=\"https://velog.velcdn.com/images/kws60000/post/1bc19506-4a0b-4f21-a37d-5762c4f0dd35/image.png\" alt=\"\"><img src=\"https://velog.velcdn.com/images/kws60000/post/0cc4e8da-a01d-40a5-8f5e-f79676ad3c62/image.png\" alt=\"\"></p>\n<p>인스턴스가 2~4개 가 유지되도록 설정했습니다.</p>\n<p><img src=\"https://velog.velcdn.com/images/kws60000/post/eb217c0d-fb02-4964-a16a-88b2bedc3f18/image.png\" alt=\"\"></p>\n<p>인스턴스가 2개 실행된 것을 확인할 수 있습니다.![]</p>\n<p>(<a href=\"https://velog.velcdn.com/images/kws60000/post/55986749-6484-4039-9afe-a88ee12e7b3d/image.png\">https://velog.velcdn.com/images/kws60000/post/55986749-6484-4039-9afe-a88ee12e7b3d/image.png</a>)</p>\n<br />\n<h2 id=\"-마치며\" style=\"position:relative;\"><a href=\"#-%EB%A7%88%EC%B9%98%EB%A9%B0\" aria-label=\" 마치며 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📄 마치며..</h2>\n<h3 id=\"1-초기-설정이-빠르고-간단하다\" style=\"position:relative;\"><a href=\"#1-%EC%B4%88%EA%B8%B0-%EC%84%A4%EC%A0%95%EC%9D%B4-%EB%B9%A0%EB%A5%B4%EA%B3%A0-%EA%B0%84%EB%8B%A8%ED%95%98%EB%8B%A4\" aria-label=\"1 초기 설정이 빠르고 간단하다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 초기 설정이 빠르고 간단하다.</h3>\n<p>EC2 를 사용하면 인스턴스 생성, 탄력적 IP 설정, 도커 설치 등 당연히 수행되어야 되는 작업이 있습니다. 어려운 일은 아니지만, EB 가 반복된 작업을 줄여주므로 편리했습니다.</p>\n<h3 id=\"2-autoscaling-설정이-편하다\" style=\"position:relative;\"><a href=\"#2-autoscaling-%EC%84%A4%EC%A0%95%EC%9D%B4-%ED%8E%B8%ED%95%98%EB%8B%A4\" aria-label=\"2 autoscaling 설정이 편하다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. AutoScaling 설정이 편하다.</h3>\n<p>AutoScaling 설정이 간단했습니다. 눈에 보이는데로 메트릭을 설정하고, 임계값과 인스턴스 수만 정하면 적용이 가능했습니다.</p>\n<br />\n<h2 id=\"참고-자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\" aria-label=\"참고 자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고 자료</h2>\n<p><a href=\"https://www.youtube.com/watch?v=AfRnvsRxZ_0\">AWS Elastic Beanstalk 활용하여 수 분만에 코드 배포하기 - 최원근 솔루션즈 아키텍트(AWS)</a>\n<a href=\"https://llshl.tistory.com/47\">무중단 배포 방식(Rolling / BlueGreen / Canary)</a>\n<a href=\"https://twosky.tistory.com/55\">[AWS] Spring Boot 프로젝트 Elastic beanstalk에 수동 배포하기</a></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%A0%81%EC%9A%A9-%EC%9D%B4%EC%9C%A0\">🤔 적용 이유</a></p>\n<ul>\n<li><a href=\"#autoscaling-loadbalancer\">AutoScaling, LoadBalancer</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EF%B8%8F-%EC%84%A4%EC%A0%95-%EB%B0%A9%EB%B2%95\">⚙️ 설정 방법</a></p>\n<ul>\n<li>\n<p><a href=\"#1-iam-%EC%97%AD%ED%95%A0-%EC%B6%94%EA%B0%80\">1. IAM 역할 추가</a></p>\n<ul>\n<li><a href=\"#11-%EC%84%9C%EB%B9%84%EC%8A%A4-%EC%97%AD%ED%95%A0\">1.1 서비스 역할</a></li>\n<li><a href=\"#12-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%ED%94%84%EB%A1%9C%ED%8C%8C%EC%9D%BC\">1.2 EC2 인스턴스 프로파일</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-%ED%99%98%EA%B2%BD-%EA%B5%AC%EC%84%B1\">2. 환경 구성</a></p>\n</li>\n<li>\n<p><a href=\"#3-%EB%B0%B0%ED%8F%AC\">3. 배포</a></p>\n</li>\n<li>\n<p><a href=\"#4-%EB%B0%B0%ED%8F%AC-%EC%98%B5%EC%85%98\">4. 배포 옵션</a></p>\n<ul>\n<li><a href=\"#1-all-at-once\">1. All at once</a></li>\n<li><a href=\"#2-rolling\">2. Rolling</a></li>\n<li><a href=\"#3-rolling-with-additional-batch\">3. Rolling with additional batch</a></li>\n<li><a href=\"#4-immutable\">4. Immutable</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#5-autoscaling\">5. AutoScaling</a></p>\n<ul>\n<li><a href=\"#1-triggers-based-scaling\">1. Triggers based scaling</a></li>\n<li><a href=\"#2-time-based-scaling\">2. Time-based scaling</a></li>\n<li><a href=\"#%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\">설정하기</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#-%EB%A7%88%EC%B9%98%EB%A9%B0\">📄 마치며..</a></p>\n<ul>\n<li><a href=\"#1-%EC%B4%88%EA%B8%B0-%EC%84%A4%EC%A0%95%EC%9D%B4-%EB%B9%A0%EB%A5%B4%EA%B3%A0-%EA%B0%84%EB%8B%A8%ED%95%98%EB%8B%A4\">1. 초기 설정이 빠르고 간단하다.</a></li>\n<li><a href=\"#2-autoscaling-%EC%84%A4%EC%A0%95%EC%9D%B4-%ED%8E%B8%ED%95%98%EB%8B%A4\">2. AutoScaling 설정이 편하다.</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\">참고 자료</a></p>\n</li>\n</ul>\n</div>","excerpt":"🤔 적용 이유 AutoScaling, LoadBalancer EB를 사용해본 적은 없으나 사용율이 증가하면 scale out 했다가, 다시 줄어들면 scale in 을 할 수 있는 AutoScaling Group과 서버의 부하를 나누어 주는 LoadBalancer를 간편하게 설정할 수 있는 점이 장점으로 느껴졌습니다.\n다른 여러 장점은 사용해보기 전에는 와닿지 않아서 ‘사용해보고 느껴보자’ 해서 사용했습니다. ⚙️ 설정 방법 1. IAM 역할 추가 Elastic beanstalk(이하 EB) 의 환경을 구성하기 위해 각 역할에 권한이 필요합니다. 1.1 서비스 역할 EB를 서비스로 사용하므로 담당할 IAM 역할을 부여합니다.\nElastic Beanstalk 서비스 역할 관리  설정하지 않을 시, 다음과 같은 에러를 만나게 됩니다.. Configuration validation exception: Invalid option specification (Namespace: ‘aws:ela…","frontmatter":{"date":"June 19, 2023","title":"Elastic Beanstalk + Docker + Java 설정","categories":"블로그 server","author":"devkimc","emoji":"💻"},"fields":{"slug":"/java-deploy-with-elastic-beanstalk-and-docker/"}},"next":{"id":"ba282916-c974-5eb1-886c-fa4fc56ae71f","html":"<h2 id=\"-에러-상황\" style=\"position:relative;\"><a href=\"#-%EC%97%90%EB%9F%AC-%EC%83%81%ED%99%A9\" aria-label=\" 에러 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🚫 에러 상황</h2>\n<p>Redis 내의 Refresh token 값을 다루기 위해 CrudRepository 를 사용하고, RDBMS 내의 데이터를 다루기 위해 JpaRepository 를 사용했습니다.</p>\n<p>프로젝트를 실행하면 뜨는 여러 로그 중 에러는 아니지만, 반갑지 않은 INFO 로그가 2개의 영역으로 나뉘어 7개 정도 반복되는 것을 확인했습니다. 엔티티 클래스 수 만큼 반복 되었고, 아래처럼 로그가 출력됐습니다.</p>\n<ul>\n<li>A 영역: Spring Data JPA</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2023-06-18 19:10:30.731  INFO 4986 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\n2023-06-18 19:10:30.670  INFO 4986 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data JPA - Could not safely identify store assignment for repository candidate interface jparest.practice.auth.jwt.RefreshTokenRepository; If you want this repository to be a JPA repository, consider annotating your entities with one of these annotations: javax.persistence.Entity, javax.persistence.MappedSuperclass (preferred), or consider extending one of the following types with your repository: org.springframework.data.jpa.repository.JpaRepository</code></pre></div>\n<ul>\n<li>B 영역: Spring Data Redis</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2023-06-18 19:10:30.741  INFO 4986 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface jparest.practice.group.repository.GroupRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository\n2023-06-18 19:10:30.741  INFO 4986 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface jparest.practice.group.repository.UserGroupRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository\n2023-06-18 19:10:30.741  INFO 4986 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface jparest.practice.invite.repository.InviteRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository\n2023-06-18 19:10:30.741  INFO 4986 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface jparest.practice.rest.repository.GroupRestRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository\n2023-06-18 19:10:30.742  INFO 4986 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface jparest.practice.rest.repository.RestRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository\n2023-06-18 19:10:30.742  INFO 4986 --- [           main] .RepositoryConfigurationExtensionSupport : Spring Data Redis - Could not safely identify store assignment for repository candidate interface jparest.practice.user.repository.UserRepository; If you want this repository to be a Redis repository, consider annotating your entities with one of these annotations: org.springframework.data.redis.core.RedisHash (preferred), or consider extending one of the following types with your repository: org.springframework.data.keyvalue.repository.KeyValueRepository</code></pre></div>\n<p>로그는 두개의 영역으로 나뉘었고, 읽어보면</p>\n<p>“Spring Data JPA: <strong>엔티티의 레포지토리에 대해 식별할 수 없다</strong>. 만약 이 레포지토리를 JPA repository로 만들려면 @\bEntity 어노테이션을 사용해라”</p>\n<p>“Spring Data Redis: <strong>엔티티의 레포지토리에 대해 식별할 수 없다</strong>. 만약 이 레포지토리를 Redis repository로 만들려면 @RedisHash 어노테이션을 사용해라”</p>\n<p>이런 내용인 것 같습니다. 왜 레포지토리를 식별할 수 없는지 의문이었습니다.</p>\n<br />\n<h2 id=\"-에러-원인\" style=\"position:relative;\"><a href=\"#-%EC%97%90%EB%9F%AC-%EC%9B%90%EC%9D%B8\" aria-label=\" 에러 원인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>📜 에러 원인</h2>\n<p>JpaRepository, CrudRepository 는 모두 Repository 인터페이스를 확장한 것입니다.</p>\n<p>문제는 @Entity 를 사용하지 않고 Respository 인터페이스를 사용(Redis 의 경우)했을 때, Spring 이\n’<strong>Repository 로부터 생성된 메서드를 어떻게 사용하지?</strong>’ 하고 의문을 품고 스스로 찾는다고 합니다.</p>\n<p>따라서, 아래처럼 Redis 에서 CrudRepository 를 사용하고 @Entity 를 사용하지 않았으므로\nSpring은 각 Repository 의 메서드 들을 어떻게 구현해야하는 지 찾습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">jparest<span class=\"token punctuation\">.</span>practice<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>jwt</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token annotation punctuation\">@Getter</span>\n<span class=\"token annotation punctuation\">@RedisHash</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"refresh\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token annotation punctuation\">@NoArgsConstructor</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RefreshToken</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> id<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> refreshToken<span class=\"token punctuation\">;</span>\n\n    <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">RefreshTokenRepository</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">CrudRepository</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RefreshToken</span><span class=\"token punctuation\">,</span> <span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>그러한 탐색 과정이 (JpaRepository x N) + (CrudRepository x M) 만큼 이루어진거라고 생각이 듭니다. (추측입니다.)</p>\n<br />\n<h2 id=\"-해결-방법\" style=\"position:relative;\"><a href=\"#-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\" aria-label=\" 해결 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>🔑 해결 방법</h2>\n<h3 id=\"1-enableredisrepositories-추가\" style=\"position:relative;\"><a href=\"#1-enableredisrepositories-%EC%B6%94%EA%B0%80\" aria-label=\"1 enableredisrepositories 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. EnableRedisRepositories 추가</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">jparest<span class=\"token punctuation\">.</span>practice<span class=\"token punctuation\">.</span>common<span class=\"token punctuation\">.</span>config</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Configuration</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>redis<span class=\"token punctuation\">.</span>repository<span class=\"token punctuation\">.</span>configuration<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableRedisRepositories</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@EnableRedisRepositories</span><span class=\"token punctuation\">(</span>basePackages <span class=\"token operator\">=</span> <span class=\"token string\">\"jparest.practice.auth.jwt\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">RedisConfig</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<p>EnableRedisRepositories 어노테이션 을 이용하면,\nRedisRepository 를 활성화 시키고, 빈 스캐닝 범위를 지정할 수 있습니다.\n이렇게 지정해주니 RedisRepository 에 대한 탐색을 다른 경로해서 하지 않아서 B 영역 로그가 출력되지 않았습니다.</p>\n<br />\n<h3 id=\"2-enablejparepositories-추가\" style=\"position:relative;\"><a href=\"#2-enablejparepositories-%EC%B6%94%EA%B0%80\" aria-label=\"2 enablejparepositories 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. EnableJpaRepositories 추가</h3>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">package</span> <span class=\"token namespace\">jparest<span class=\"token punctuation\">.</span>practice<span class=\"token punctuation\">.</span>common<span class=\"token punctuation\">.</span>config</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">ComponentScan</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">Configuration</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>context<span class=\"token punctuation\">.</span>annotation<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">FilterType</span></span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token import\"><span class=\"token namespace\">org<span class=\"token punctuation\">.</span>springframework<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">.</span>jpa<span class=\"token punctuation\">.</span>repository<span class=\"token punctuation\">.</span>config<span class=\"token punctuation\">.</span></span><span class=\"token class-name\">EnableJpaRepositories</span></span><span class=\"token punctuation\">;</span>\n\n<span class=\"token annotation punctuation\">@Configuration</span>\n<span class=\"token annotation punctuation\">@EnableJpaRepositories</span><span class=\"token punctuation\">(</span>basePackages <span class=\"token operator\">=</span> <span class=\"token string\">\"jparest.practice\"</span><span class=\"token punctuation\">,</span>\n        excludeFilters <span class=\"token operator\">=</span> <span class=\"token annotation punctuation\">@ComponentScan.Filter</span><span class=\"token punctuation\">(</span>\n                type <span class=\"token operator\">=</span> <span class=\"token class-name\">FilterType</span><span class=\"token punctuation\">.</span><span class=\"token constant\">ASPECTJ</span><span class=\"token punctuation\">,</span> pattern <span class=\"token operator\">=</span> <span class=\"token string\">\"jparest.practice.auth.jwt.*\"</span>\n        <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">JpaConfig</span> <span class=\"token punctuation\">{</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>여전히 A 로그는 출력됐습니다.\n그래서 JpaRepository 를 활성화 시키고, 빈 스캐닝 범위를 지정하기 위해 추가 <strong>EnableJpaRepositories</strong> 어노테이션을 추가했습니다.\n주의할 점은 @Entity 가 없는데 Repository 를 사용하면 Spring 이 어떻게 메서드를 구현할 지 찾는다고 했습니다.\n따라서 Redis 를 사용하는 곳은 빈 스캐닝 범위에서 제외시켰습니다.\nEnableJpaRepositories 까지 적용했더니 모든 로그가 사라진 것을 확인할 수 있었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">2023-06-18 20:42:02.762  INFO 5431 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 141 ms. Found 6 JPA repository interfaces.\n2023-06-18 20:42:02.763  INFO 5431 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Multiple Spring Data modules found, entering strict repository configuration mode\n2023-06-18 20:42:02.763  INFO 5431 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Bootstrapping Spring Data Redis repositories in DEFAULT mode.\n2023-06-18 20:42:02.772  INFO 5431 --- [           main] .s.d.r.c.RepositoryConfigurationDelegate : Finished Spring Data repository scanning in 3 ms. Found 1 Redis repository interfaces.</code></pre></div>\n<br />\n<h2 id=\"참고-자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\" aria-label=\"참고 자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고 자료</h2>\n<p><a href=\"https://stackoverflow.com/questions/47002094/spring-multiple-spring-data-modules-found-entering-strict-repository-configur\">https://stackoverflow.com/questions/47002094/spring-multiple-spring-data-modules-found-entering-strict-repository-configur</a></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#-%EC%97%90%EB%9F%AC-%EC%83%81%ED%99%A9\">🚫 에러 상황</a></p>\n</li>\n<li>\n<p><a href=\"#-%EC%97%90%EB%9F%AC-%EC%9B%90%EC%9D%B8\">📜 에러 원인</a></p>\n</li>\n<li>\n<p><a href=\"#-%ED%95%B4%EA%B2%B0-%EB%B0%A9%EB%B2%95\">🔑 해결 방법</a></p>\n<ul>\n<li><a href=\"#1-enableredisrepositories-%EC%B6%94%EA%B0%80\">1. EnableRedisRepositories 추가</a></li>\n<li><a href=\"#2-enablejparepositories-%EC%B6%94%EA%B0%80\">2. EnableJpaRepositories 추가</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0-%EC%9E%90%EB%A3%8C\">참고 자료</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"June 18, 2023","title":"Could not safely identify store assignment for repository candidate interface","categories":"블로그 spring","author":"devkimc","emoji":"💻"},"fields":{"slug":"/could-not-safety-identify-store-assignment-for-repository/"}},"prev":{"id":"7ba9acd4-64b0-5866-814e-0d93dd9a50bd","html":"<h2 id=\"에러-상황\" style=\"position:relative;\"><a href=\"#%EC%97%90%EB%9F%AC-%EC%83%81%ED%99%A9\" aria-label=\"에러 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>에러 상황</h2>\n<p>Mac OS 환경에서 Mariadb 를 homebrew로 설치했습니다. 이후 spring 에서 작업 시 MySQL 커넥터를 사용해서 DB를 연동했습니다. 잘 사용하다가 파이썬을 설치한 이후로 해당 에러가 발생하고 JDBC DB 연동이 안됐습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">MariaDB <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>none<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token keyword\">select</span> @<span class=\"token variable\">@version</span><span class=\"token punctuation\">,</span> @<span class=\"token variable\">@version_comment</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------------+-------------------+</span>\n<span class=\"token operator\">|</span> @<span class=\"token variable\">@version</span>      <span class=\"token operator\">|</span> @<span class=\"token variable\">@version_comment</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------------+-------------------+</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">11.0</span><span class=\"token number\">.2</span><span class=\"token operator\">-</span>MariaDB <span class=\"token operator\">|</span> Homebrew          <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------------+-------------------+</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span>SQLException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Unknown</span> system variable 'transaction_isolation'</code></pre></div>\n<br />\n<h2 id=\"에러-원인\" style=\"position:relative;\"><a href=\"#%EC%97%90%EB%9F%AC-%EC%9B%90%EC%9D%B8\" aria-label=\"에러 원인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>에러 원인</h2>\n<h3 id=\"transaction_isolation\" style=\"position:relative;\"><a href=\"#transaction_isolation\" aria-label=\"transaction_isolation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>transaction_isolation</h3>\n<p>트랜잭션의 격리수준을 설정하는 변수입니다. 격리수준에 따라 다음처럼 나뉩니다. InnoDB의 기본 격리수준은 REPEATABLE READ 입니다.</p>\n<ul>\n<li>READ UNCOMMITTED</li>\n<li>READ COMMITTED</li>\n<li>REPEATEABLE READ</li>\n<li>SERIALIZABLE</li>\n</ul>\n<br />\nMariaDB 공식 문서를 보니 11.1.1 이전 버전에는 tx_isolation 을 사용하고 이후 버전에서는 transaction_isolation 변수를 사용한다고 했습니다.\n<blockquote>\n<p>To determine the global and session transaction isolation levels at runtime, check the value of the tx_isolation system variable (note that the variable has been renamed transaction_isolation from MariaDB 11.1.1, to match the option, and the old name deprecated).</p>\n</blockquote>\n<p>저는 11.0.2 버전을 설치했으므로 tx_isolation 변수가 사용된 것 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">MariaDB <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>none<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token keyword\">show</span> variables <span class=\"token operator\">like</span> <span class=\"token string\">'t%_isolation'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-----------------+</span>\n<span class=\"token operator\">|</span> Variable_name <span class=\"token operator\">|</span> <span class=\"token keyword\">Value</span>           <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-----------------+</span>\n<span class=\"token operator\">|</span> tx_isolation  <span class=\"token operator\">|</span> <span class=\"token keyword\">REPEATABLE</span><span class=\"token operator\">-</span><span class=\"token keyword\">READ</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-----------------+</span></code></pre></div>\n<p>MySQL 5.7.20 이후 버전을 사용하면 tx_isolation 대신 transaction_isolation가 존재해야 한다고 합니다. 저는 MySQL 8.0.29 버전을 사용하려 했기 때문에 ‘transaction_isolation’ 가 필요하다고 에러가 발생한 것이었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">implementation 'mysql:mysql-connector-java:8.0.29'</code></pre></div>\n<br />\n<h2 id=\"해결-과정\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95\" aria-label=\"해결 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결 과정</h2>\n<h3 id=\"1-mycnf-수정-\" style=\"position:relative;\"><a href=\"#1-mycnf-%EC%88%98%EC%A0%95-\" aria-label=\"1 mycnf 수정  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. my.cnf 수정 ❌</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">##\n## This group is read both by the client and the server\n## use it for options that affect everything\n##\n[client-server]\n\n[mysqld]\ntransaction-isolation = READ-COMMITED\n\n##\n## include *.cnf from the config directory\n##\n!includedir /opt/homebrew/etc/my.cnf.d</code></pre></div>\n<p>윈도우를 사용시 my.ini 파일을 수정해서 해결했다는 글을 보고 /opt/homebrew/etc/my.cnf 파일을 수정했지만, 수정 후 데몬 실행이 안됐습니다.</p>\n<h3 id=\"2-mysql-대신-mariadb-와-연동하기-\" style=\"position:relative;\"><a href=\"#2-mysql-%EB%8C%80%EC%8B%A0-mariadb-%EC%99%80-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0-\" aria-label=\"2 mysql 대신 mariadb 와 연동하기  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. MySQL 대신 MariaDB 와 연동하기 ✅</h3>\n<p>MariaDB 로 연동하면 같은 변수를 사용하기 때문에 문제가 없습니다. 에러없이 연동할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">//\timplementation 'mysql:mysql-connector-java:8.0.29'</span>\n\truntimeOnly 'org<span class=\"token punctuation\">.</span>mariadb<span class=\"token punctuation\">.</span>jdbc<span class=\"token operator\">:</span>mariadb<span class=\"token operator\">-</span>java<span class=\"token operator\">-</span>client'</code></pre></div>\n<h3 id=\"3-mariadb-업그레이드-\" style=\"position:relative;\"><a href=\"#3-mariadb-%EC%97%85%EA%B7%B8%EB%A0%88%EC%9D%B4%EB%93%9C-\" aria-label=\"3 mariadb 업그레이드  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. MariaDB 업그레이드 ❌</h3>\n<p>11.1.1 이후의 MariaDB의 버전으로 업그레이드하면 transaction_isolation를 사용하기 때문에 되지 않을까? 했지만 homebrew로 설치가능한 11.1.1 이후 버전이 없었기 때문에 현재는 적용 불가능한 방법이었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">% brew search mariadb\n==> Formulae\nmariadb ✔                  mariadb@10.2               mariadb@10.7\nmariadb-connector-c        mariadb@10.3               mariadb@10.8\nmariadb-connector-odbc     mariadb@10.4               mariadb@10.9\nmariadb@10.10              mariadb@10.5               qt-mariadb\nmariadb@10.11              mariadb@10.6</code></pre></div>\n<br />\n<h2 id=\"참고자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\" aria-label=\"참고자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고자료</h2>\n<p><a href=\"https://mariadb.com/kb/en/set-transaction/\">MariaDB - SET TRANSACTION</a>\n<a href=\"https://trustyou.tistory.com/338\">mysql 8.0 내에서 tx_isolation만 있는 경우</a></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%97%90%EB%9F%AC-%EC%83%81%ED%99%A9\">에러 상황</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%97%90%EB%9F%AC-%EC%9B%90%EC%9D%B8\">에러 원인</a></p>\n<ul>\n<li><a href=\"#transaction_isolation\">transaction_isolation</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95\">해결 과정</a></p>\n<ul>\n<li><a href=\"#1-mycnf-%EC%88%98%EC%A0%95-\">1. my.cnf 수정 ❌</a></li>\n<li><a href=\"#2-mysql-%EB%8C%80%EC%8B%A0-mariadb-%EC%99%80-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0-\">2. MySQL 대신 MariaDB 와 연동하기 ✅</a></li>\n<li><a href=\"#3-mariadb-%EC%97%85%EA%B7%B8%EB%A0%88%EC%9D%B4%EB%93%9C-\">3. MariaDB 업그레이드 ❌</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\">참고자료</a></p>\n</li>\n</ul>\n</div>","frontmatter":{"date":"July 31, 2023","title":"Unknown system variable 'transaction_isolation'","categories":"블로그 db","author":"devkimc","emoji":"💻"},"fields":{"slug":"/unknown-system-variable-transaction-isolation/"}},"site":{"siteMetadata":{"siteUrl":"https://devkimc.github.io","comments":{"utterances":{"repo":"devkimc/devkimc.github.io"}}}}},"pageContext":{"slug":"/java-deploy-with-elastic-beanstalk-and-docker/","nextSlug":"/could-not-safety-identify-store-assignment-for-repository/","prevSlug":"/unknown-system-variable-transaction-isolation/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}