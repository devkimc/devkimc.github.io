{"componentChunkName":"component---src-templates-blog-template-js","path":"/unknown-system-variable-transaction-isolation/","result":{"data":{"cur":{"id":"7ba9acd4-64b0-5866-814e-0d93dd9a50bd","html":"<h2 id=\"에러-상황\" style=\"position:relative;\"><a href=\"#%EC%97%90%EB%9F%AC-%EC%83%81%ED%99%A9\" aria-label=\"에러 상황 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>에러 상황</h2>\n<p>Mac OS 환경에서 Mariadb 를 homebrew로 설치했습니다. 이후 spring 에서 작업 시 MySQL 커넥터를 사용해서 DB를 연동했습니다. 잘 사용하다가 파이썬을 설치한 이후로 해당 에러가 발생하고 JDBC DB 연동이 안됐습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">MariaDB <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>none<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token keyword\">select</span> @<span class=\"token variable\">@version</span><span class=\"token punctuation\">,</span> @<span class=\"token variable\">@version_comment</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------------+-------------------+</span>\n<span class=\"token operator\">|</span> @<span class=\"token variable\">@version</span>      <span class=\"token operator\">|</span> @<span class=\"token variable\">@version_comment</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------------+-------------------+</span>\n<span class=\"token operator\">|</span> <span class=\"token number\">11.0</span><span class=\"token number\">.2</span><span class=\"token operator\">-</span>MariaDB <span class=\"token operator\">|</span> Homebrew          <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">----------------+-------------------+</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\"><span class=\"token namespace\">java<span class=\"token punctuation\">.</span>sql<span class=\"token punctuation\">.</span></span>SQLException</span><span class=\"token operator\">:</span> <span class=\"token class-name\">Unknown</span> system variable 'transaction_isolation'</code></pre></div>\n<br />\n<h2 id=\"에러-원인\" style=\"position:relative;\"><a href=\"#%EC%97%90%EB%9F%AC-%EC%9B%90%EC%9D%B8\" aria-label=\"에러 원인 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>에러 원인</h2>\n<h3 id=\"transaction_isolation\" style=\"position:relative;\"><a href=\"#transaction_isolation\" aria-label=\"transaction_isolation permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>transaction_isolation</h3>\n<p>트랜잭션의 격리수준을 설정하는 변수입니다. 격리수준에 따라 다음처럼 나뉩니다. InnoDB의 기본 격리수준은 REPEATABLE READ 입니다.</p>\n<ul>\n<li>READ UNCOMMITTED</li>\n<li>READ COMMITTED</li>\n<li>REPEATEABLE READ</li>\n<li>SERIALIZABLE</li>\n</ul>\n<br />\nMariaDB 공식 문서를 보니 11.1.1 이전 버전에는 tx_isolation 을 사용하고 이후 버전에서는 transaction_isolation 변수를 사용한다고 했습니다.\n<blockquote>\n<p>To determine the global and session transaction isolation levels at runtime, check the value of the tx_isolation system variable (note that the variable has been renamed transaction_isolation from MariaDB 11.1.1, to match the option, and the old name deprecated).</p>\n</blockquote>\n<p>저는 11.0.2 버전을 설치했으므로 tx_isolation 변수가 사용된 것 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"sql\"><pre class=\"language-sql\"><code class=\"language-sql\">MariaDB <span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>none<span class=\"token punctuation\">)</span><span class=\"token punctuation\">]</span><span class=\"token operator\">></span> <span class=\"token keyword\">show</span> variables <span class=\"token operator\">like</span> <span class=\"token string\">'t%_isolation'</span><span class=\"token punctuation\">;</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-----------------+</span>\n<span class=\"token operator\">|</span> Variable_name <span class=\"token operator\">|</span> <span class=\"token keyword\">Value</span>           <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-----------------+</span>\n<span class=\"token operator\">|</span> tx_isolation  <span class=\"token operator\">|</span> <span class=\"token keyword\">REPEATABLE</span><span class=\"token operator\">-</span><span class=\"token keyword\">READ</span> <span class=\"token operator\">|</span>\n<span class=\"token operator\">+</span><span class=\"token comment\">---------------+-----------------+</span></code></pre></div>\n<p>MySQL 5.7.20 이후 버전을 사용하면 tx_isolation 대신 transaction_isolation가 존재해야 한다고 합니다. 저는 MySQL 8.0.29 버전을 사용하려 했기 때문에 ‘transaction_isolation’ 가 필요하다고 에러가 발생한 것이었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">implementation 'mysql:mysql-connector-java:8.0.29'</code></pre></div>\n<br />\n<h2 id=\"해결-과정\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95\" aria-label=\"해결 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해결 과정</h2>\n<h3 id=\"1-mycnf-수정-\" style=\"position:relative;\"><a href=\"#1-mycnf-%EC%88%98%EC%A0%95-\" aria-label=\"1 mycnf 수정  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. my.cnf 수정 ❌</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">##\n## This group is read both by the client and the server\n## use it for options that affect everything\n##\n[client-server]\n\n[mysqld]\ntransaction-isolation = READ-COMMITED\n\n##\n## include *.cnf from the config directory\n##\n!includedir /opt/homebrew/etc/my.cnf.d</code></pre></div>\n<p>윈도우를 사용시 my.ini 파일을 수정해서 해결했다는 글을 보고 /opt/homebrew/etc/my.cnf 파일을 수정했지만, 수정 후 데몬 실행이 안됐습니다.</p>\n<h3 id=\"2-mysql-대신-mariadb-와-연동하기-\" style=\"position:relative;\"><a href=\"#2-mysql-%EB%8C%80%EC%8B%A0-mariadb-%EC%99%80-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0-\" aria-label=\"2 mysql 대신 mariadb 와 연동하기  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. MySQL 대신 MariaDB 와 연동하기 ✅</h3>\n<p>MariaDB 로 연동하면 같은 변수를 사용하기 때문에 문제가 없습니다. 에러없이 연동할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">//\timplementation 'mysql:mysql-connector-java:8.0.29'</span>\n\truntimeOnly 'org<span class=\"token punctuation\">.</span>mariadb<span class=\"token punctuation\">.</span>jdbc<span class=\"token operator\">:</span>mariadb<span class=\"token operator\">-</span>java<span class=\"token operator\">-</span>client'</code></pre></div>\n<h3 id=\"3-mariadb-업그레이드-\" style=\"position:relative;\"><a href=\"#3-mariadb-%EC%97%85%EA%B7%B8%EB%A0%88%EC%9D%B4%EB%93%9C-\" aria-label=\"3 mariadb 업그레이드  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. MariaDB 업그레이드 ❌</h3>\n<p>11.1.1 이후의 MariaDB의 버전으로 업그레이드하면 transaction_isolation를 사용하기 때문에 되지 않을까? 했지만 homebrew로 설치가능한 11.1.1 이후 버전이 없었기 때문에 현재는 적용 불가능한 방법이었습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">% brew search mariadb\n==> Formulae\nmariadb ✔                  mariadb@10.2               mariadb@10.7\nmariadb-connector-c        mariadb@10.3               mariadb@10.8\nmariadb-connector-odbc     mariadb@10.4               mariadb@10.9\nmariadb@10.10              mariadb@10.5               qt-mariadb\nmariadb@10.11              mariadb@10.6</code></pre></div>\n<br />\n<h2 id=\"참고자료\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\" aria-label=\"참고자료 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>참고자료</h2>\n<p><a href=\"https://mariadb.com/kb/en/set-transaction/\">MariaDB - SET TRANSACTION</a>\n<a href=\"https://trustyou.tistory.com/338\">mysql 8.0 내에서 tx_isolation만 있는 경우</a></p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%EC%97%90%EB%9F%AC-%EC%83%81%ED%99%A9\">에러 상황</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%97%90%EB%9F%AC-%EC%9B%90%EC%9D%B8\">에러 원인</a></p>\n<ul>\n<li><a href=\"#transaction_isolation\">transaction_isolation</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%95%B4%EA%B2%B0-%EA%B3%BC%EC%A0%95\">해결 과정</a></p>\n<ul>\n<li><a href=\"#1-mycnf-%EC%88%98%EC%A0%95-\">1. my.cnf 수정 ❌</a></li>\n<li><a href=\"#2-mysql-%EB%8C%80%EC%8B%A0-mariadb-%EC%99%80-%EC%97%B0%EB%8F%99%ED%95%98%EA%B8%B0-\">2. MySQL 대신 MariaDB 와 연동하기 ✅</a></li>\n<li><a href=\"#3-mariadb-%EC%97%85%EA%B7%B8%EB%A0%88%EC%9D%B4%EB%93%9C-\">3. MariaDB 업그레이드 ❌</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\">참고자료</a></p>\n</li>\n</ul>\n</div>","excerpt":"에러 상황 Mac OS 환경에서 Mariadb 를 homebrew로 설치했습니다. 이후 spring 에서 작업 시 MySQL 커넥터를 사용해서 DB를 연동했습니다. 잘 사용하다가 파이썬을 설치한 이후로 해당 에러가 발생하고 JDBC DB 연동이 안됐습니다. 에러 원인 transaction_isolation 트랜잭션의 격리수준을 설정하는 변수입니다. 격리수준에 따라 다음처럼 나뉩니다. InnoDB의 기본 격리수준은 REPEATABLE READ 입니다. READ UNCOMMITTED READ COMMITTED REPEATEABLE READ SERIALIZABLE To determine the global and session transaction isolation levels at runtime, check the value of the tx_isolation system variable (note that the variable has been renamed transaction_i…","frontmatter":{"date":"July 31, 2023","title":"Unknown system variable 'transaction_isolation'","categories":"블로그 database","author":"vvs-kim","emoji":"💻"},"fields":{"slug":"/unknown-system-variable-transaction-isolation/"}},"next":{"id":"88e9951b-a0bf-55f9-b806-859aa24b0a8a","html":"<h2 id=\"포스팅-배경\" style=\"position:relative;\"><a href=\"#%ED%8F%AC%EC%8A%A4%ED%8C%85-%EB%B0%B0%EA%B2%BD\" aria-label=\"포스팅 배경 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>포스팅 배경</h2>\n<h3 id=\"namecheap-ssl-인증에-대한-자료-부족\" style=\"position:relative;\"><a href=\"#namecheap-ssl-%EC%9D%B8%EC%A6%9D%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9E%90%EB%A3%8C-%EB%B6%80%EC%A1%B1\" aria-label=\"namecheap ssl 인증에 대한 자료 부족 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Namecheap SSL 인증에 대한 자료 부족</h3>\n<p>Namecheap 사이트에서 생성한 SSL 인증서가 만료되어, https 적용을 위해 재발급 했습니다.\nNamecheap 에서 제공하는 문서만으로는 재발급이 쉽지 않아서 작성했습니다.\n이 게시물이 저와 같은 상황의 분들에게 도움이 되면 좋겠습니다.\n<br/></p>\n<h2 id=\"순서\" style=\"position:relative;\"><a href=\"#%EC%88%9C%EC%84%9C\" aria-label=\"순서 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>순서</h2>\n<ol>\n<li>인증서 발행</li>\n<li>인증서 다운로드</li>\n<li>CNAME 등록</li>\n<li>모든 인증서 파일을 단일 파일로 결합</li>\n<li>Nginx 설정 확인 및 재실행<br>\n<br/><br/></li>\n</ol>\n<h2 id=\"전체-과정\" style=\"position:relative;\"><a href=\"#%EC%A0%84%EC%B2%B4-%EA%B3%BC%EC%A0%95\" aria-label=\"전체 과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>전체 과정</h2>\n<h3 id=\"1-인증서-발행\" style=\"position:relative;\"><a href=\"#1-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%B0%9C%ED%96%89\" aria-label=\"1 인증서 발행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 인증서 발행</h3>\n<p><a href=\"https://ap.www.namecheap.com/domains/ssl/detail/*CertificateID*/*PrimaryDomain*/dashboard\">https://ap.www.namecheap.com/domains/ssl/detail/*CertificateID*/*PrimaryDomain*/dashboard</a></p>\n<p>해당 페이지로 접속하거나,</p>\n<p>Namecheap 사이트에서 Domain List → Details → SSL → Details 로 이동합니다.\n(갱신하고자 하는 Domain 과 Certificate 선택)</p>\n<p>만료된 CSR Code 를 복사합니다.\n만료된 CSR Code를 사용하지 않는다면 이전에 사용하는 private_key 와 생성할 public_key 가 매칭하지 않습니다.\n(private_key도 바꿔야 합니다.)</p>\n<p>따라서 CSR Code 를 새로 생성할 필요가 없습니다.\nissue 버튼을 눌러서 인증서를 발행합니다.</p>\n<p><img src=\"https://velog.velcdn.com/images/kws60000/post/9d7af08f-00ea-4476-a23a-b2966bd6e4bd/image.png\" alt=\"\"><br/></p>\n<h3 id=\"2-인증서-다운로드\" style=\"position:relative;\"><a href=\"#2-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C\" aria-label=\"2 인증서 다운로드 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 인증서 다운로드</h3>\n<p>인증서를 다운로드 받기 전에 CSR 코드를 입력하는 부분이 존재할 것입니다.\n복사한 CSR 코드를 붙여넣기 합니다.\n그러면 Certificate Status 가 ISSUED(발행됐다) 로 변경될 것입니다.\nDOWNLOAD CERTIFICATE 를 눌러서 인증서를 다운받습니다.\n<img src=\"https://velog.velcdn.com/images/kws60000/post/7c14da62-47ea-4711-920a-68d10bf2ac45/image.png\" alt=\"\"><br/></p>\n<h3 id=\"3-cname-등록\" style=\"position:relative;\"><a href=\"#3-cname-%EB%93%B1%EB%A1%9D\" aria-label=\"3 cname 등록 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. CNAME 등록</h3>\n<p>사용하는 도메인에 대해서 소유권이 있는지를 확인하는 단계입니다.</p>\n<ol>\n<li>Get a CNAME record from this page (Edit methods).</li>\n</ol>\n<p>해당 링크를 클릭 후 CNAME 의 host, value 를 복사합니다.</p>\n<ol start=\"2\">\n<li>Namecheap’s Default DNS, Backup DNS or FreeDNS: Visit the host records page.</li>\n</ol>\n<p>해당 링크를 클릭 후 복사한 host, value 를 붙여 넣고 TTL 은 5분으로 설정합니다.</p>\n<p><img src=\"https://velog.velcdn.com/images/kws60000/post/b8542940-0930-4baf-b0c7-d2dd22f8536d/image.png\" alt=\"\"></p>\n<br/>\n<h3 id=\"4-모든-인증서-파일을-단일-파일로-결합\" style=\"position:relative;\"><a href=\"#4-%EB%AA%A8%EB%93%A0-%EC%9D%B8%EC%A6%9D%EC%84%9C-%ED%8C%8C%EC%9D%BC%EC%9D%84-%EB%8B%A8%EC%9D%BC-%ED%8C%8C%EC%9D%BC%EB%A1%9C-%EA%B2%B0%ED%95%A9\" aria-label=\"4 모든 인증서 파일을 단일 파일로 결합 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 모든 인증서 파일을 단일 파일로 결합</h3>\n<p><img src=\"https://velog.velcdn.com/images/kws60000/post/13dbe578-4385-4374-8bc8-bd68b112c2fc/image.png\" alt=\"\">\n다운로드 파일을 압축 해제하면 위와 같이 세개의 파일이 존재합니다.\n이 중 <strong>crt</strong> 파일과 <strong>ca-bundle</strong> 파일을 합치면,\n서버에 존재하는 private key 와 매칭하는 인증서 파일이 됩니다.\n합치는 방법은 다음과 같습니다.</p>\n<blockquote>\n<p>// your_domain\ncat your_domain.crt your_domain.ca-bundle >> your_domain_chain.crt</p>\n</blockquote>\n<blockquote>\n<p>// ex) google\ncat google.crt google.ca-bundle >> google_chain.crt</p>\n</blockquote>\n<br/>\n통합된 단일 파일을 서버의 ssl 폴더 경로로 이동합니다.<br/><br/>\n<h3 id=\"5-nginx-설정-확인-및-재실행\" style=\"position:relative;\"><a href=\"#5-nginx-%EC%84%A4%EC%A0%95-%ED%99%95%EC%9D%B8-%EB%B0%8F-%EC%9E%AC%EC%8B%A4%ED%96%89\" aria-label=\"5 nginx 설정 확인 및 재실행 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Nginx 설정 확인 및 재실행</h3>\n<p>서버의 nginx 설정이 올바르게 되어 있는지 확인합니다.\n보통 /etc/nginx/nginx.conf\n또는 /etc/nginx/conf.d/default.conf 파일에서 설정하는 것 같습니다.\n설정 파일 안에 https 설정이 다음의 내용을 포함하는지 확인합니다.</p>\n<blockquote>\n<p>server {</p>\n</blockquote>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">listen       443 ssl;\nssl_certificate \"/etc/ssl/your_domain.crt\";\nssl_certificate_key \"/etc/ssl/your_domain.key\";\n...</code></pre></div>\n<p>}</p>\n<br/>\n경로는 저와 다를 수 있습니다.\nprivate key 와 통합된 crt 의 경로를 올바르게 해줘야 합니다.\n<blockquote>\n<p>service nginx restart\nservice nginx status</p>\n</blockquote>\n<br/>\n<p>확인 후 이상이 없다면 적용된 것입니다.\n시크릿 창을 띄워서 도메인에 접속하시면 https 적용이 되었을 것입니다.</p>\n<p>만약 nginx 를 재실행 했을 때 다음과 같은 오류가 발견된다면,</p>\n<blockquote>\n<p>SSL: error:0906D066:PEM routines:PEM_read_bio:bad end line</p>\n</blockquote>\n<br/>\n<p>인증서 형식에 대한 오류입니다.\n통합된 crt 파일을 확인합니다.\n다음과 일치하는 부분이 있는지 찾아서 변경해줍니다.</p>\n<blockquote>\n<p>// 변경 전\n-----END CERTIFICATE----------BEGIN CERTIFICATE-----</p>\n</blockquote>\n<blockquote>\n<p>// 변경 후\n-----END CERTIFICATE-----\n-----BEGIN CERTIFICATE-----</p>\n</blockquote>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#%ED%8F%AC%EC%8A%A4%ED%8C%85-%EB%B0%B0%EA%B2%BD\">포스팅 배경</a></p>\n<ul>\n<li><a href=\"#namecheap-ssl-%EC%9D%B8%EC%A6%9D%EC%97%90-%EB%8C%80%ED%95%9C-%EC%9E%90%EB%A3%8C-%EB%B6%80%EC%A1%B1\">Namecheap SSL 인증에 대한 자료 부족</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%88%9C%EC%84%9C\">순서</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%A0%84%EC%B2%B4-%EA%B3%BC%EC%A0%95\">전체 과정</a></p>\n<ul>\n<li><a href=\"#1-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%B0%9C%ED%96%89\">1. 인증서 발행</a></li>\n<li><a href=\"#2-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EB%8B%A4%EC%9A%B4%EB%A1%9C%EB%93%9C\">2. 인증서 다운로드</a></li>\n<li><a href=\"#3-cname-%EB%93%B1%EB%A1%9D\">3. CNAME 등록</a></li>\n<li><a href=\"#4-%EB%AA%A8%EB%93%A0-%EC%9D%B8%EC%A6%9D%EC%84%9C-%ED%8C%8C%EC%9D%BC%EC%9D%84-%EB%8B%A8%EC%9D%BC-%ED%8C%8C%EC%9D%BC%EB%A1%9C-%EA%B2%B0%ED%95%A9\">4. 모든 인증서 파일을 단일 파일로 결합</a></li>\n<li><a href=\"#5-nginx-%EC%84%A4%EC%A0%95-%ED%99%95%EC%9D%B8-%EB%B0%8F-%EC%9E%AC%EC%8B%A4%ED%96%89\">5. Nginx 설정 확인 및 재실행</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"October 05, 2022","title":"Namecheap SSL 인증서 재발급 후기 (Https 적용)","categories":"블로그 web","author":"vvs-kim","emoji":"💻"},"fields":{"slug":"/namecheap-issue-ssl/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://vvs-kim.github.io","comments":{"utterances":{"repo":"vvs-kim/vvs-kim.github.io"}}}}},"pageContext":{"slug":"/unknown-system-variable-transaction-isolation/","nextSlug":"/namecheap-issue-ssl/","prevSlug":""}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}